<!DOCTYPE html>
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src="js/play.js" type="text/javascript"></script>
    <script src="js/MIDI.min.js" type="text/javascript"></script>
    <script src="js/tabla-ogg.js"></script>
    <script src="js/tabla-mp3.js"></script>
</head>
<body>

<h1>Composition</h1>

<textarea id="composition" cols="120" rows="20">
Dha1[5.0]+++++| Ti| - | Dha1[2] | Ti | Ta | Dha1 | Dha2 | Ti | Ta | Dha1 | Ge | Thun | Na | Ke1 | Na | 
Ta+++++ | Ti | Ta | Ta | Ti | Ta | Ta | Ta2 | Ti | Ta | Dha1 | Ge | Dhin | Na | Ge | Na
</textarea>

<br />

<input type="button" onclick="readComposition()" value="Play">
<input type="button" onclick="stopAllBeats()" value="Stop">

<p>Compositions are written in the <a href="http://www.taalmala.com/help.shtml">TaalMala</a> notation.</p>

<script type="text/javascript">

var VOLUME = 120;
var CHANNEL = 2;

window.onload = function () {
    MIDI.loadPlugin({
        soundfontUrl: ".",
        instruments: "synth_drum",
        onsuccess: function() {
            MIDI.programChange(CHANNEL, 118);
            readComposition()
        }
    });
};

function readComposition() {
    var script = document.getElementById("composition").value;
    playComposition(script, 360)
}

</script>

</body>
</html>